{% extends 'base.html' %}
{% block content %}
<style>
    add-sty {
        width: 500px;
    }
    #table {
        width: 100%;
        table-layout: fixed;
    }
    #table th,
    #table td {
        width: 200px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .scroll-container {
        width: 100%;
        overflow-x: auto;
        white-space: nowrap;
    }
    .scroll-container > div {
        display: inline-block;
        padding: 10px;
        margin: 5px;
        border: 1px solid #ccc;
    }
    .form-scroll-container {
        width: 100%;
        overflow-x: auto;
        white-space: nowrap;
    }
    .form-scroll-container > div {
        display: inline-block;
        padding: 10px;
        margin: 5px;
        border: 1px solid #ccc;
    }
    .required::after {
        content: "*"; /* Display an asterisk after the label */
        color: red; /* Change the color to red */
        margin-left: 5px; /* Add some spacing between the label and asterisk */
    }
    .header-content {
        border: none;
        font-weight: bold;
    }
    table td {
        width: 200px;
    }
</style>
<div class="container">
    <h1 style="margin-left: 400px;">Companies</h1>
    <div class="scroll-container">
        <table>
        <thead>
        <th style="width: 200px;">{{form.cmo.label}}</th>
        <th style="width: 200px;">{{form.manufacturing_site.label}}</th>
        <th style="width: 200px;">{{form.address.label}}</th>
        <th style="width: 200px;">{{form.country.label}}</th>
        <th style="width: 200px;">{{form.cmo.label}}</th>
        <th style="width: 200px;">{{form.manufacturing_site.label}}</th>
        <th style="width: 200px;">{{form.address.label}}</th>
        <th style="width: 200px;">{{form.country.label}}</th>
        </thead>
        {% for detail in context.get("details") %}
        <tbody>
        <td>{{detail.cmo}}</td>
        <td>{{detail.manufacturing_site}}</td>
        <td>{{detail.address}}</td>
        <td>{{detail.country.value}}</td>
        <td>{{detail.cmo}}</td>
        <td>{{detail.manufacturing_site}}</td>
        <td>{{detail.address}}</td>
        <td>{{detail.country}}</td>
        </tbody>
        {% endfor %}
    </table>
    </div>













<!--    <div class="scroll-container">-->
<!--        <div style="width: 200px;" class="header-content">-->
<!--            <center>{{form.cmo.label}}</center>-->
<!--        </div>-->
<!--        <div style="width: 200px;" class="header-content">-->
<!--            <center>{{form.manufacturing_site.label}}</center>-->
<!--        </div>-->
<!--        <div style="width: 200px;" class="header-content">-->
<!--            <center>{{form.address.label}}</center>-->
<!--        </div>-->
<!--        <div style="width: 200px;" class="header-content">-->
<!--            <center>{{form.country.label}}</center>-->
<!--        </div>-->
<!--        <div style="width: 200px;" class="header-content">-->
<!--            <center>{{form.offered_services.json.label}}</center>-->
<!--        </div>-->
<!--        <div style="width: 200px;" class="header-content">-->
<!--            <center>{{form.manufactured_product_type.label}}</center>-->
<!--        </div>-->
<!--        <div style="width: 200px; border: none; font-weight: bold;">-->
<!--            <center>{{form.accreditations.label}}</center>-->
<!--        </div>-->
<!--        <hr>-->
<!--        {% for detail in context.get("details") %}-->
<!--        <div style="border: none; display: flex;">-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.cmo}}</center>-->
<!--            </div>-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.manufacturing_site}}</center>-->
<!--            </div>-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.address}}</center>-->
<!--            </div>-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.country}}</center>-->
<!--            </div>-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.offered_services.json}}</center>-->
<!--            </div>-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.manufactured_product_type}}</center>-->
<!--            </div>-->
<!--            <div style="width: 200px; border: none; font-weight: bold;">-->
<!--                <center>{{detail.accreditations}}</center>-->
<!--            </div>-->
<!--        </div>-->

<!--        {% endfor %}-->
<!--    </div>-->
<!--    {{details}}-->
<!--    {{form}}-->
    <!--        <table class="table " id="table">-->
    <!--            <thead>-->
    <!--            <tr>-->
    <!--                <th scope="col" id="cmo-header">CMO</th>-->
    <!--                <th scope="col" id="manufacturing-site-header">Manufacturing Site</th>-->
    <!--                <th scope="col" id="address-header">Address</th>-->
    <!--                <th scope="col" id="country-header">Country</th>-->
    <!--                <th scope="col" id="offered-services-header">Offered Services</th>-->
    <!--                <th scope="col" id="manufactured-product-types-header">Manufactured Product Types</th>-->
    <!--                <th scope="col" id="accreditations-header">Accreditations</th>-->
    <!--                <th scope="col" id="bulk-production-header">Bulk Production</th>-->
    <!--                <th scope="col" id="primary-packaging-header">Primary Packaging</th>-->
    <!--                <th scope="col" id="secondary-packaging-header">Secondary Packaging</th>-->
    <!--            </tr>-->
    <!--            </thead>-->
    <!--            <tbody id="table-body">-->
    <!--            {% for detail in context.get("details") %}-->
    <!--            <tr>-->
    <!--                <td id="cmo" style="width:150px;">{{ detail.cmo }}</td>-->
    <!--                <td id="manufacturing-site" >{{ detail.manufacturing_site }}</td>-->
    <!--                <td id="address"  style="width: 250px;">{{ detail.address }}</td>-->
    <!--                <td id="country">{{ detail.country.value }}</td>-->
    <!--                <td id="offered-services">{{ detail.offered_services.json.value }}</td>-->
    <!--                <td id="manufactured-product-types">{{ detail.manufactured_product_type.value }}</td>-->
    <!--                <td id="accreditations">{{ detail.accreditations.value }}</td>-->
    <!--                <td id="bulk-production">{{ detail.bulk_production }}</td>-->
    <!--                <td id="primary-packaging">{{ detail.primary_packaging }}</td>-->
    <!--                <td id="secondary-packaging">{{ detail.secondary_packaging }}</td>-->
    <!--            </tr>-->
    <!--            {% endfor %}-->
    <!--            </tbody>-->
    <!--        </table>-->
    <!--    </div>-->
    <div id="form-container" style="display: none;">
        <div class="form-scroll-container">
            <table>
                <thead>
                <tr>
                    <th scope="col" class="required">CMO</th>
                    <th scope="col" class="required">Manufacturing Site</th>
                    <th scope="col" class="required">Address</th>
                    <th scope="col" class="required">Country</th>
                    <th scope="col" class="required">Offered Services</th>
                    <th scope="col" class="required">Manufactured product types</th>
                    <th scope="col" class="required">Accreditations</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <form method="POST">
                        {{ form.hidden_tag() }}
                        <td>
                            <div style="width: 150px; margin-right: 10px;">
                                {{ form.cmo(class="form-control") }}
                            </div>
                        </td>

                        <td>
                            <div style="width: 150px; margin-right: 10px;">
                                {{ form.manufacturing_site(class="form-control") }}
                            </div>
                        </td>
                        <td>
                            <div style="width: 150px; margin-right: 10px;">
                                {{ form.address(class="form-control") }}
                            </div>
                        </td>
                        <td>
                            <div style="width: 150px; margin-right: 10px;">
                                {{ form.country(class="form-control") }}
                            </div>
                        </td>
                        <td>{{ form.offered_services(class="form-control") }}</td>
                        <td>{{ form.manufactured_product_type(class="form-control") }}</td>
                        <td>{{ form.accreditations(class="form-control") }}</td>
                        <td>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </td>
                    </form>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <button type="button" id="toggle-form" class="btn btn-primary" style="margin-top: 20px;">Add New</button>

    <script>
        document.getElementById('toggle-form').addEventListener('click', function() {
            var formContainer = document.getElementById('form-container');
            var tableBody = document.getElementById('table');
            if (formContainer.style.display === 'none') {
                formContainer.style.display = 'block';
                tableBody.style.display = 'none';
            } else {
                formContainer.style.display = 'none';
                table.style.display = 'table-row-group';
            }
        });

        // Get the table element
        const table = document.getElementById('table');

        // Calculate and set the width of each th and td based on content width
        const setColumnWidths = () => {
            const headers = table.querySelectorAll('th');
            const cells = table.querySelectorAll('td');

            headers.forEach(header => {
                const headerWidth = header.scrollWidth;
                header.style.width = `${headerWidth}px`;
            });

            cells.forEach(cell => {
                const cellWidth = cell.scrollWidth;
                cell.style.width = `${cellWidth}px`;
            });
        };

        // Call setColumnWidths when the page is loaded and when it's resized
        window.addEventListener('load', setColumnWidths);
        window.addEventListener('resize', setColumnWidths);
    </script>
    {% endblock %}
